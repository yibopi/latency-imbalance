==24227== Helgrind, a thread error detector
==24227== Copyright (C) 2007-2015, and GNU GPL'd, by OpenWorks LLP et al.
==24227== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==24227== Command: ./yarrp -i ipDB/target.txt -o meas/target.txt -Z -r 5000
==24227== Parent PID: 24226
==24227== 
--24227-- 
--24227-- Valgrind options:
--24227--    --tool=helgrind
--24227--    -v
--24227--    --log-file=hg.log
--24227-- Contents of /proc/version:
--24227--   Linux version 4.13.0-32-generic (buildd@lgw01-amd64-004) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.5)) #35~16.04.1-Ubuntu SMP Thu Jan 25 10:13:43 UTC 2018
--24227-- 
--24227-- Arch and hwcaps: AMD64, LittleEndian, amd64-cx16-lzcnt-rdtscp-sse3-avx-avx2-bmi
--24227-- Page sizes: currently 4096, max supported 4096
--24227-- Valgrind library directory: /usr/lib/valgrind
--24227-- Reading syms from /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp
--24227-- Reading syms from /lib/x86_64-linux-gnu/ld-2.23.so
--24227--   Considering /lib/x86_64-linux-gnu/ld-2.23.so ..
--24227--   .. CRC mismatch (computed aa979a42 wanted 9019bbb7)
--24227--   Considering /usr/lib/debug/lib/x86_64-linux-gnu/ld-2.23.so ..
--24227--   .. CRC is valid
--24227-- Reading syms from /usr/lib/valgrind/helgrind-amd64-linux
--24227--   Considering /usr/lib/valgrind/helgrind-amd64-linux ..
--24227--   .. CRC mismatch (computed b2178fda wanted 9c894282)
--24227--    object doesn't have a symbol table
--24227--    object doesn't have a dynamic symbol table
--24227-- Scheduler: using generic scheduler lock implementation.
--24227-- Reading suppressions file: /usr/lib/valgrind/default.supp
==24227== embedded gdbserver: reading from /tmp/vgdb-pipe-from-vgdb-to-24227-by-root-on-???
==24227== embedded gdbserver: writing to   /tmp/vgdb-pipe-to-vgdb-from-24227-by-root-on-???
==24227== embedded gdbserver: shared mem   /tmp/vgdb-pipe-shared-mem-vgdb-24227-by-root-on-???
==24227== 
==24227== TO CONTROL THIS PROCESS USING vgdb (which you probably
==24227== don't want to do, unless you know exactly what you're doing,
==24227== or are doing some strange experiment):
==24227==   /usr/lib/valgrind/../../bin/vgdb --pid=24227 ...command...
==24227== 
==24227== TO DEBUG THIS PROCESS USING GDB: start GDB like this
==24227==   /path/to/gdb ./yarrp
==24227== and then give GDB the following command
==24227==   target remote | /usr/lib/valgrind/../../bin/vgdb --pid=24227
==24227== --pid is optional if only one valgrind process is running
==24227== 
--24227-- Reading syms from /usr/lib/valgrind/vgpreload_core-amd64-linux.so
--24227--   Considering /usr/lib/valgrind/vgpreload_core-amd64-linux.so ..
--24227--   .. CRC mismatch (computed 2567ccf6 wanted 49420590)
--24227--    object doesn't have a symbol table
--24227-- Reading syms from /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so
--24227--   Considering /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so ..
--24227--   .. CRC mismatch (computed 4fc8b0b2 wanted 80b49e71)
--24227--    object doesn't have a symbol table
--24227-- REDIR: 0x401b920 (ld-linux-x86-64.so.2:index) redirected to 0x4c36ef0 (index)
--24227-- REDIR: 0x401bb40 (ld-linux-x86-64.so.2:strcmp) redirected to 0x4c37e00 (strcmp)
--24227-- REDIR: 0x401cfd0 (ld-linux-x86-64.so.2:strlen) redirected to 0x4c37150 (strlen)
--24227-- REDIR: 0x401dd30 (ld-linux-x86-64.so.2:mempcpy) redirected to 0x4c3a3a0 (mempcpy)
--24227-- Reading syms from /usr/local/lib/libcperm.so
--24227-- Reading syms from /lib/x86_64-linux-gnu/libz.so.1.2.8
--24227--    object doesn't have a symbol table
--24227-- Reading syms from /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21
--24227--   Considering /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21 ..
--24227--   .. CRC mismatch (computed 1765928b wanted 248a962f)
--24227--    object doesn't have a symbol table
--24227-- Reading syms from /lib/x86_64-linux-gnu/libm-2.23.so
--24227--   Considering /lib/x86_64-linux-gnu/libm-2.23.so ..
--24227--   .. CRC mismatch (computed e8c3647b wanted c3efddac)
--24227--   Considering /usr/lib/debug/lib/x86_64-linux-gnu/libm-2.23.so ..
--24227--   .. CRC is valid
--24227-- Reading syms from /lib/x86_64-linux-gnu/libgcc_s.so.1
--24227--   Considering /lib/x86_64-linux-gnu/libgcc_s.so.1 ..
--24227--   .. CRC mismatch (computed b9a68419 wanted 29d51b00)
--24227--    object doesn't have a symbol table
--24227-- Reading syms from /lib/x86_64-linux-gnu/libpthread-2.23.so
--24227--   Considering /usr/lib/debug/.build-id/ce/17e023542265fc11d9bc8f534bb4f070493d30.debug ..
--24227--   .. build-id is valid
==24227== WARNING: new redirection conflicts with existing -- ignoring it
--24227--     old: 0x05b0ceb0 (pthread_spin_init   ) W-> (0000.0) 0x04c365e0 pthread_spin_init
--24227--     new: 0x05b0ceb0 (pthread_spin_init   ) W-> (0000.0) 0x04c365f0 pthread_spin_unlock
==24227== WARNING: new redirection conflicts with existing -- ignoring it
--24227--     old: 0x05b0e940 (sem_wait@@GLIBC_2.2.) W-> (0000.0) 0x04c366d0 sem_wait@*
--24227--     new: 0x05b0e940 (sem_wait@@GLIBC_2.2.) W-> (0000.0) 0x04c366c0 sem_wait
==24227== WARNING: new redirection conflicts with existing -- ignoring it
--24227--     old: 0x05b0ebc0 (sem_post@@GLIBC_2.2.) W-> (0000.0) 0x04c366f0 sem_post@*
--24227--     new: 0x05b0ebc0 (sem_post@@GLIBC_2.2.) W-> (0000.0) 0x04c366e0 sem_post
--24227-- Reading syms from /lib/x86_64-linux-gnu/libc-2.23.so
--24227--   Considering /lib/x86_64-linux-gnu/libc-2.23.so ..
--24227--   .. CRC mismatch (computed 7a8ee3e4 wanted a5190ac4)
--24227--   Considering /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.23.so ..
--24227--   .. CRC is valid
--24227-- REDIR: 0x5daba00 (libc.so.6:strcasecmp) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5da7280 (libc.so.6:strcspn) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5dadcf0 (libc.so.6:strncasecmp) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5da96f0 (libc.so.6:strpbrk) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5da9a80 (libc.so.6:strspn) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5dab14b (libc.so.6:memcpy@GLIBC_2.2.5) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5da9400 (libc.so.6:rindex) redirected to 0x4c36bd0 (rindex)
--24227-- REDIR: 0x5da0130 (libc.so.6:malloc) redirected to 0x4c2ef40 (malloc)
--24227-- REDIR: 0x5da7720 (libc.so.6:strlen) redirected to 0x4c37090 (strlen)
--24227-- REDIR: 0x5daabf0 (libc.so.6:__GI_memcmp) redirected to 0x4c39380 (__GI_memcmp)
--24227-- REDIR: 0x5da5cd0 (libc.so.6:strcmp) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5dbb570 (libc.so.6:__strcmp_sse2_unaligned) redirected to 0x4c37cc0 (strcmp)
--24227-- REDIR: 0x5dab3b0 (libc.so.6:__GI_mempcpy) redirected to 0x4c3a280 (__GI_mempcpy)
--24227-- REDIR: 0x5daabb0 (libc.so.6:bcmp) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5e8a430 (libc.so.6:__memcmp_sse4_1) redirected to 0x4c394c0 (__memcmp_sse4_1)
--24227-- REDIR: 0x5da5ab0 (libc.so.6:__GI_strchr) redirected to 0x4c36d30 (__GI_strchr)
--24227-- REDIR: 0x52ebe60 (libstdc++.so.6:operator new(unsigned long)) redirected to 0x4c2f4a0 (operator new(unsigned long))
--24227-- REDIR: 0x5daa060 (libc.so.6:__GI_strstr) redirected to 0x4c3a4f0 (__strstr_sse2)
--24227-- REDIR: 0x52ebf10 (libstdc++.so.6:operator new[](unsigned long)) redirected to 0x4c2fbc0 (operator new[](unsigned long))
--24227-- REDIR: 0x5dab1b0 (libc.so.6:memset) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5e8e970 (libc.so.6:__memset_avx2) redirected to 0x4c39830 (memset)
--24227-- REDIR: 0x5da0d10 (libc.so.6:calloc) redirected to 0x4c30ec0 (calloc)
--24227-- REDIR: 0x5b06990 (libpthread.so.0:pthread_create@@GLIBC_2.2.5) redirected to 0x4c35cc0 (pthread_create@*)
--24227-- REDIR: 0x5db2760 (libc.so.6:strchrnul) redirected to 0x4c3a110 (strchrnul)
--24227-- REDIR: 0x5da71a0 (libc.so.6:__GI_strcpy) redirected to 0x4c371a0 (__GI_strcpy)
--24227-- REDIR: 0x5daa860 (libc.so.6:memchr) redirected to 0x4c37ea0 (memchr)
--24227-- REDIR: 0x5db03f0 (libc.so.6:memcpy@@GLIBC_2.14) redirected to 0x4a286f0 (_vgnU_ifunc_wrapper)
--24227-- REDIR: 0x5e69ea0 (libc.so.6:__memcpy_avx_unaligned) redirected to 0x4c381d0 (memcpy@@GLIBC_2.14)
--24227-- REDIR: 0x5b0afc0 (libpthread.so.0:pthread_rwlock_init) redirected to 0x4c36630 (pthread_rwlock_init)
--24227-- REDIR: 0x5b0b810 (libpthread.so.0:pthread_rwlock_wrlock) redirected to 0x4c36650 (pthread_rwlock_wrlock)
--24227-- REDIR: 0x5b0beb0 (libpthread.so.0:pthread_rwlock_unlock) redirected to 0x4c36690 (pthread_rwlock_unlock)
--24227-- REDIR: 0x52e9f10 (libstdc++.so.6:operator delete(void*)) redirected to 0x4c30600 (operator delete(void*))
==24227== ---Thread-Announcement------------------------------------------
==24227== 
==24227== Thread #2 was created
==24227==    at 0x5E233DE: clone (clone.S:74)
==24227==    by 0x5B05149: create_thread (createthread.c:102)
==24227==    by 0x5B06E83: pthread_create@@GLIBC_2.2.5 (pthread_create.c:679)
==24227==    by 0x4C34BB7: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41A52A: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:23)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227== 
==24227== ---Thread-Announcement------------------------------------------
==24227== 
==24227== Thread #1 is the program's root thread
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x4090EB: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1338)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A54: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B36B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f0 is 0 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6155DA0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A62: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6155da0 is 10,032 bytes inside a block of size 13,928 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40BC92: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x40B868: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x40B21E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F81F8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x4090EB: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1338)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F81F0 by thread #1
==24227== Locks held: none
==24227==    at 0x40B36B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A54: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60f81f0 is 0 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x61BD2B0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A74: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x61bd2b0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x6231488 by thread #2
==24227== Locks held: none
==24227==    at 0x40AF46: std::equal_to<unsigned int>::operator()(unsigned int const&, unsigned int const&) const (stl_function.h:357)
==24227==    by 0x40A4D7: std::__detail::_Equal_helper<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, unsigned long, false>::_S_equals(std::equal_to<unsigned int> const&, std::__detail::_Select1st const&, unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x409AE5: std::__detail::_Hashtable_base<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x409137: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1346)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6231488 is 8 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6231480 by thread #2
==24227== Locks held: none
==24227==    at 0x40914E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x6231480 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x62D1AC8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A549: std::__detail::_Hash_code_base<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> const*, unsigned long) const (hashtable_policy.h:1180)
==24227==    by 0x409B18: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) const (hashtable.h:617)
==24227==    by 0x409173: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x62d1ac8 is 8 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
--24227-- REDIR: 0x5b0b240 (libpthread.so.0:pthread_rwlock_rdlock) redirected to 0x4c36660 (pthread_rwlock_rdlock)
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x640D670 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5B6: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40775E: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x640d670 is 13,024 bytes inside a block of size 121,384 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40BC92: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x40B868: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x40B21E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x6168990 by thread #2
==24227== Locks held: none
==24227==    at 0x40775F: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6168990 is 16 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8168 by thread #2
==24227== Locks held: none
==24227==    at 0x416BA4: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned short const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x415FFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1338)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192DF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8168 is 168 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8160 by thread #2
==24227== Locks held: none
==24227==    at 0x416FC0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192EB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8160 is 160 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D7A0 by thread #2
==24227== Locks held: none
==24227==    at 0x416FCE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6d2d7a0 is 208 bytes inside a block of size 376 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D8F0 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x6D2D898 by thread #2
==24227== Locks held: none
==24227==    at 0x419327: std::equal_to<unsigned short>::operator()(unsigned short const&, unsigned short const&) const (stl_function.h:357)
==24227==    by 0x41834F: std::__detail::_Equal_helper<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, unsigned long, false>::_S_equals(std::equal_to<unsigned short> const&, std::__detail::_Select1st const&, unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x417051: std::__detail::_Hashtable_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x416049: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1346)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d898 is 8 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D890 by thread #2
==24227== Locks held: none
==24227==    at 0x416060: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1353)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d890 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x6D2D218 by thread #2
==24227== Locks held: none
==24227==    at 0x4183C1: std::__detail::_Hash_code_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> const*, unsigned long) const (hashtable_policy.h:1180)
==24227==    by 0x417084: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) const (hashtable.h:617)
==24227==    by 0x416085: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1353)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6d2d218 is 8 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D7A0 by thread #2
==24227== Locks held: none
==24227==    at 0x417EDE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6d2d7a0 is 208 bytes inside a block of size 376 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D8A0 by thread #2
==24227== Locks held: none
==24227==    at 0x413DE7: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8a0 is 16 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x6D2D8A8 by thread #2
==24227== Locks held: none
==24227==    at 0x4077FF: parseICMP(Traceroute*) (listener.cpp:121)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8a8 is 24 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D8A0 by thread #2
==24227== Locks held: none
==24227==    at 0x40782D: parseICMP(Traceroute*) (listener.cpp:122)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8a0 is 16 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x6168990 by thread #2
==24227== Locks held: none
==24227==    at 0x407950: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6168990 is 16 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D2D8F0 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d2d8f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8168 by thread #1
==24227== Locks held: none
==24227==    at 0x4192DF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416BA4: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned short const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x415FFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1338)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8168 is 168 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8160 by thread #1
==24227== Locks held: none
==24227==    at 0x4192EB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FC0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8160 is 160 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D4F0 by thread #2
==24227== Locks held: none
==24227==    at 0x416BFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d2d4f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D4F0 by thread #2
==24227== Locks held: none
==24227==    at 0x416BFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413E2F: Traceroute::tracePkt(unsigned short) (trace.cpp:54)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d2d4f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD610 by thread #2
==24227== Locks held: none
==24227==    at 0x40947B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:441)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd610 is 16 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD618 by thread #2
==24227== Locks held: none
==24227==    at 0x409486: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:442)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd618 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD620 by thread #2
==24227== Locks held: none
==24227==    at 0x4094A0: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:443)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd620 is 32 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D35690 by thread #2
==24227== Locks held: none
==24227==    at 0x417EFA: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d35690 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x6D356F8 by thread #2
==24227== Locks held: none
==24227==    at 0x419327: std::equal_to<unsigned short>::operator()(unsigned short const&, unsigned short const&) const (stl_function.h:357)
==24227==    by 0x41834F: std::__detail::_Equal_helper<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, unsigned long, false>::_S_equals(std::equal_to<unsigned short> const&, std::__detail::_Select1st const&, unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x417051: std::__detail::_Hashtable_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x417F18: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1433)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d356f8 is 8 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D64A78 by thread #1
==24227== Locks held: none
==24227==    at 0x4182CF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1470)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FCE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d64a78 is 28,552 bytes inside a block of size 29,912 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D64A78 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FCE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d64a78 is 28,552 bytes inside a block of size 29,912 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D8D670 by thread #2
==24227== Locks held: none
==24227==    at 0x416FF8: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>::_M_next() const (hashtable_policy.h:296)
==24227==    by 0x416073: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1353)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d8d670 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60FD618 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x4240B8: Scheduler::chkResponse(unsigned int, PfxState*, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:569)
==24227==    by 0x4245BB: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:646)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409486: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:442)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd618 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60FD610 by thread #1
==24227== Locks held: none
==24227==    at 0x4089E5: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x4240B8: Scheduler::chkResponse(unsigned int, PfxState*, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:569)
==24227==    by 0x4245BB: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:646)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40947B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:441)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd610 is 16 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x60FD609 by thread #1
==24227== Locks held: none
==24227==    at 0x4245FE: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:649)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd609 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6107FA0 by thread #1
==24227== Locks held: none
==24227==    at 0x40A92D: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1457)
==24227==    by 0x409E75: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1607)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6107fa0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6EC8780 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6ec8780 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x702D4F8 by thread #2
==24227== Locks held: none
==24227==    at 0x40AF46: std::equal_to<unsigned int>::operator()(unsigned int const&, unsigned int const&) const (stl_function.h:357)
==24227==    by 0x40A4D7: std::__detail::_Equal_helper<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, unsigned long, false>::_S_equals(std::equal_to<unsigned int> const&, std::__detail::_Select1st const&, unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x409AE5: std::__detail::_Hashtable_base<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x40A5F0: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1433)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x702d4f8 is 8 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8200 by thread #1
==24227== Locks held: none
==24227==    at 0x40A949: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1465)
==24227==    by 0x409E75: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1607)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8200 is 16 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x640D0E0 by thread #1
==24227== Locks held: none
==24227==    at 0x40A98A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1469)
==24227==    by 0x409E75: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1607)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5B6: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x640d0e0 is 11,600 bytes inside a block of size 121,384 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40BC92: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x40B868: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x40B21E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8170 by thread #1
==24227== Locks held: none
==24227==    at 0x418271: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1465)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8170 is 176 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8200 by thread #1
==24227== Locks held: none
==24227==    at 0x40B237: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1976)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8200 is 16 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x7106270 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x7106270 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8200 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2AF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1985)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8200 is 16 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x7026CD0 by thread #1
==24227== Locks held: none
==24227==    at 0x40B31E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1993)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40914E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7026cd0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x7082210 by thread #1
==24227== Locks held: none
==24227==    at 0x40B33B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1994)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A74: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7082210 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8170 by thread #1
==24227== Locks held: none
==24227==    at 0x4191B7: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1976)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8170 is 176 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8170 by thread #1
==24227== Locks held: none
==24227==    at 0x41922F: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1985)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8170 is 176 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x628D5F0 by thread #2
==24227== Locks held: none
==24227==    at 0x409B5B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40775E: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x628d5f0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x628D5F0 by thread #2
==24227== Locks held: none
==24227==    at 0x409B5B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x628d5f0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x710D6C0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A8C: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>::_M_next() const (hashtable_policy.h:296)
==24227==    by 0x409161: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x710d6c0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x409260: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:592)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F0 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5A8: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B36B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f0 is 0 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6E15580 by thread #2
==24227== Locks held: none
==24227==    at 0x409B5B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6e15580 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x73CBD10 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5FF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1436)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x73cbd10 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x62A8248 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x421F6E: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:112)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409486: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:442)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x62a8248 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x62A8240 by thread #1
==24227== Locks held: none
==24227==    at 0x4089E5: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x421F6E: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:112)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40947B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:441)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x62a8240 is 16 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8168 by thread #2
==24227== Locks held: none
==24227==    at 0x416BA4: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned short const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x415F14: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:592)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192DF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8168 is 168 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8160 by thread #2
==24227== Locks held: none
==24227==    at 0x417ED0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192EB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8160 is 160 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x79F56A0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A8C: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>::_M_next() const (hashtable_policy.h:296)
==24227==    by 0x409195: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1344)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x79f56a0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD618 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x421F6E: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:112)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x60fd618 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D3AC90 by thread #1
==24227== Locks held: none
==24227==    at 0x413D5B: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x413DE7: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d3ac90 is 16 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x409260: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:592)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 2 at 0x901ABE0 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 2 by thread #1
==24227== Locks held: none
==24227==    at 0x425100: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe0 is 320 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 2 at 0x901ABE2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 2 by thread #1
==24227== Locks held: none
==24227==    at 0x42510E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe2 is 322 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x901ABE4 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #1
==24227== Locks held: none
==24227==    at 0x42511E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe4 is 324 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x901ABE8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x425A77: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:191)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe8 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x901ABF0 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abf0 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x901ABF8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B972: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x408BCE: std::_Vector_base<Hop, std::allocator<Hop> >::~_Vector_base() (stl_vector.h:161)
==24227==    by 0x4088C6: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:425)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==  Address 0x901abf8 is 344 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1120 by thread #1
==24227== Locks held: none
==24227==    at 0x409F3E: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1120 is 288 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1122 by thread #1
==24227== Locks held: none
==24227==    at 0x409F4C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1122 is 290 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x93F1124 by thread #1
==24227== Locks held: none
==24227==    at 0x409F5C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1124 is 292 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1130 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1130 is 304 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1128 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1128 is 296 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x9697640 by thread #1
==24227== Locks held: none
==24227==    at 0x40C0D1: _ZSt10_ConstructI3HopIRKS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x40BDBE: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x40BA23: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x40B55A: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x40AB5D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==  Address 0x9697640 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x90E6720 by thread #2
==24227== Locks held: none
==24227==    at 0x40AB65: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:321)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x90e6720 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x9167740 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x9167740 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x977AD42 by thread #1
==24227== Locks held: none
==24227==    at 0x4220F1: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x977ad42 is 2 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6113B38 by thread #2
==24227== Locks held: none
==24227==    at 0x408AE0: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:915)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x428742: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1439)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x6113b38 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D1E9E8 by thread #1
==24227== Locks held: none
==24227==    at 0x428742: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1439)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d1e9e8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1140 by thread #1
==24227== Locks held: none
==24227==    at 0x425100: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1140 is 320 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1142 by thread #1
==24227== Locks held: none
==24227==    at 0x42510E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1142 is 322 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x93F1144 by thread #1
==24227== Locks held: none
==24227==    at 0x42511E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1144 is 324 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1148 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x425A77: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:191)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1148 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x9914BC0 by thread #1
==24227== Locks held: none
==24227==    at 0x42B0D3: Hop* std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m<Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:340)
==24227==    by 0x42A097: Hop* std::__copy_move_a<false, Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:402)
==24227==    by 0x4285A4: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:438)
==24227==    by 0x426EB9: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:472)
==24227==    by 0x425BC0: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:206)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9914bc0 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x9914BC4 by thread #1
==24227== Locks held: none
==24227==    at 0x42B0D3: Hop* std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m<Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:340)
==24227==    by 0x42A097: Hop* std::__copy_move_a<false, Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:402)
==24227==    by 0x4285A4: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:438)
==24227==    by 0x426EB9: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:472)
==24227==    by 0x425BC0: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:206)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9914bc4 is 4 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x945D4E0 by thread #2
==24227== Locks held: none
==24227==    at 0x40B9B6: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:186)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x945d4e0 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x945D4E8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B9D0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:187)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x408BCE: std::_Vector_base<Hop, std::allocator<Hop> >::~_Vector_base() (stl_vector.h:161)
==24227==    by 0x4088C6: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:425)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==  Address 0x945d4e8 is 344 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x9613458 by thread #1
==24227== Locks held: none
==24227==    at 0x408BCE: std::_Vector_base<Hop, std::allocator<Hop> >::~_Vector_base() (stl_vector.h:161)
==24227==    by 0x4088C6: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:425)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B972: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x9613458 is 344 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1160 by thread #1
==24227== Locks held: none
==24227==    at 0x409F3E: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1160 is 352 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1162 by thread #1
==24227== Locks held: none
==24227==    at 0x409F4C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1162 is 354 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x93F1164 by thread #1
==24227== Locks held: none
==24227==    at 0x409F5C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1164 is 356 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1170 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1170 is 368 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1168 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1168 is 360 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x960D5A8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B9A8: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x425A77: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:191)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x960d5a8 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x7ADE728 by thread #2
==24227== Locks held: none
==24227==    at 0x408B10: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x428742: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1439)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x7ade728 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== More than 100 errors detected.  Subsequent errors
==24227== will still be recorded, but in less detail than before.
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D32C70 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x42B0D6: Hop* std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m<Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:340)
==24227==    by 0x42A097: Hop* std::__copy_move_a<false, Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:402)
==24227==    by 0x4285A4: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:438)
==24227==    by 0x426EB9: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:472)
==24227==    by 0x425BC0: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:206)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x422476: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:163)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==  Address 0x6d32c70 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x4093D9: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:416)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038290 by thread #2
==24227== Locks held: none
==24227==    at 0x408A64: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:919)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9038290 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x6E5C209 by thread #1
==24227== Locks held: none
==24227==    at 0x424740: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:663)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6e5c209 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038288 by thread #2
==24227== Locks held: none
==24227==    at 0x408FEC: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:441)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9038288 is 8 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038290 by thread #2
==24227== Locks held: none
==24227==    at 0x408FF7: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:442)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9038290 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038298 by thread #2
==24227== Locks held: none
==24227==    at 0x409012: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:443)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2E6: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:105)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x425E14: void std::swap<Flow>(Flow&, Flow&) (move.h:185)
==24227==    by 0x4224AD: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:165)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==  Address 0x9038298 is 24 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 2 at 0x9B2A450 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40C0D1: _ZSt10_ConstructI3HopIRKS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x40BDBE: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x40BA23: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x40B55A: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x40AB5D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==  Address 0x9b2a450 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 4 at 0x9B2A454 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40C0D1: _ZSt10_ConstructI3HopIRKS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x40BDBE: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x40BA23: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x40B55A: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x40AB5D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==  Address 0x9b2a454 is 4 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9AB5EA8 by thread #2
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2B0: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:103)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x40BEE1: _ZSt10_ConstructI4FlowIS0_EEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40BA93: Flow* std::__uninitialized_copy<false>::__uninit_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:75)
==24227==    by 0x40B610: Flow* std::uninitialized_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:126)
==24227==    by 0x40AC82: Flow* std::__uninitialized_copy_a<std::move_iterator<Flow*>, Flow*, Flow>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:281)
==24227==    by 0x40A165: Flow* std::__uninitialized_move_if_noexcept_a<Flow*, Flow*, std::allocator<Flow> >(Flow*, Flow*, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:304)
==24227==    by 0x40940B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:420)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422152: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:138)
==24227==  Address 0x9ab5ea8 is 8 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9AB5EB0 by thread #2
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2CB: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:104)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x40BEE1: _ZSt10_ConstructI4FlowIS0_EEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40BA93: Flow* std::__uninitialized_copy<false>::__uninit_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:75)
==24227==    by 0x40B610: Flow* std::uninitialized_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:126)
==24227==    by 0x40AC82: Flow* std::__uninitialized_copy_a<std::move_iterator<Flow*>, Flow*, Flow>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:281)
==24227==    by 0x40A165: Flow* std::__uninitialized_move_if_noexcept_a<Flow*, Flow*, std::allocator<Flow> >(Flow*, Flow*, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:304)
==24227==    by 0x40940B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:420)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422152: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:138)
==24227==  Address 0x9ab5eb0 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9AB5F58 by thread #2
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2E6: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:105)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x40BEE1: _ZSt10_ConstructI4FlowIS0_EEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40BA93: Flow* std::__uninitialized_copy<false>::__uninit_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:75)
==24227==    by 0x40B610: Flow* std::uninitialized_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:126)
==24227==    by 0x40AC82: Flow* std::__uninitialized_copy_a<std::move_iterator<Flow*>, Flow*, Flow>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:281)
==24227==    by 0x40A165: Flow* std::__uninitialized_move_if_noexcept_a<Flow*, Flow*, std::allocator<Flow> >(Flow*, Flow*, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:304)
==24227==    by 0x40940B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:420)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==  Address 0x9ab5f58 is 184 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x62628E8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x4079FE: parseICMP(Traceroute*) (listener.cpp:148)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x4271CF: std::vector<Flow, std::allocator<Flow> >::_M_range_check(unsigned long) const (stl_vector.h:802)
==24227==    by 0x425F4A: std::vector<Flow, std::allocator<Flow> >::at(unsigned long) (stl_vector.h:824)
==24227==    by 0x4226D8: hopEnumHelper(unsigned int, IPState*, int) (scheduler.cpp:228)
==24227==    by 0x422F40: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:314)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x62628e8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9143698 by thread #2
==24227== Locks held: none
==24227==    at 0x41F72C: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:397)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x9143698 is 72 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A0 by thread #2
==24227== Locks held: none
==24227==    at 0x41F737: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:398)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a0 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A8 by thread #2
==24227== Locks held: none
==24227==    at 0x41F752: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:399)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a8 is 88 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A0 by thread #2
==24227== Locks held: none
==24227==    at 0x41F229: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop&&) (vector.tcc:335)
==24227==    by 0x41EB37: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:128)
==24227==    by 0x41DF70: Flow::updateHop(unsigned int, Hop) (graph.cpp:26)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a0 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A0 by thread #2
==24227== Locks held: none
==24227==    at 0x41EAA4: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:119)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a0 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x62628E8 by thread #2
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x407996: parseICMP(Traceroute*) (listener.cpp:144)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x62628e8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x95B6110 by thread #1
==24227== Locks held: none
==24227==    at 0x427ABC: std::vector<Hop, std::allocator<Hop> >::_M_erase_at_end(Hop*) (stl_vector.h:1439)
==24227==    by 0x4264E7: std::vector<Hop, std::allocator<Hop> >::clear() (stl_vector.h:1212)
==24227==    by 0x424892: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:681)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408FF7: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:442)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x95b6110 is 48 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x7331EE9 by thread #1
==24227== Locks held: none
==24227==    at 0x4248C6: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:683)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7331ee9 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227==  Lock at 0x7A6E9D0 was first observed
==24227==    at 0x4C33785: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x4087D5: PfxState::PfxState() (scheduler.h:109)
==24227==    by 0x40BC3D: std::pair<unsigned int const, PfxState>::pair<unsigned int const&, 0ul>(std::tuple<unsigned int const&>&, std::tuple<>&, std::_Index_tuple<0ul>, std::_Index_tuple<>) (tuple:1172)
==24227==    by 0x40B803: std::pair<unsigned int const, PfxState>::pair<unsigned int const&>(std::piecewise_construct_t, std::tuple<unsigned int const&>, std::tuple<>) (tuple:1161)
==24227==    by 0x40B198: _ZN9__gnu_cxx13new_allocatorISt4pairIKj8PfxStateEE9constructIS4_IRKSt21piecewise_construct_tSt5tupleIIRS2_EESA_IIEEEEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40A76B: _ZNSt16allocator_traitsISaISt4pairIKj8PfxStateEEE9constructIS3_IRKSt21piecewise_construct_tSt5tupleIIRS1_EESA_IIEEEEEvRS4_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x409CE7: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1955)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x7a6e9d0 is 80 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== Possible data race during read of size 8 at 0x7A6EA68 by thread #1
==24227== Locks held: 1, at address 0x7A6E9D0
==24227==    at 0x4088E9: std::vector<Flow, std::allocator<Flow> >::~vector() (stl_vector.h:424)
==24227==    by 0x40AE1D: IPState::~IPState() (scheduler.h:91)
==24227==    by 0x40AE3D: std::pair<unsigned char, IPState>::~pair() (stl_pair.h:96)
==24227==    by 0x42A023: void __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::destroy<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>*) (new_allocator.h:124)
==24227==    by 0x42851A: void std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::destroy<std::pair<unsigned char, IPState> >(std::allocator<std::pair<unsigned char, IPState> >&, std::pair<unsigned char, IPState>*) (alloc_traits.h:542)
==24227==    by 0x426D33: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_erase(__gnu_cxx::__normal_iterator<std::pair<unsigned char, IPState>*, std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > > >) (vector.tcc:147)
==24227==    by 0x425942: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::erase(__gnu_cxx::__normal_iterator<std::pair<unsigned char, IPState> const*, std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > > >) (stl_vector.h:1147)
==24227==    by 0x421DFD: PfxState::delFromIPMap(unsigned int) (scheduler.cpp:90)
==24227==    by 0x424B16: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:712)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7a6ea68 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA00DCE0 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408A64: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:919)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0xa00dce0 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x9706AA1 by thread #1
==24227== Locks held: none
==24227==    at 0x423003: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:327)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x9706aa1 is 1 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x9706AA4 by thread #1
==24227== Locks held: none
==24227==    at 0x423068: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:330)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x9706aa4 is 4 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA522148 by thread #1
==24227== Locks held: none
==24227==    at 0x4088AD: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:424)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0xa522148 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x6386D40 by thread #2
==24227== Locks held: none
==24227==    at 0x407A6B: parseICMP(Traceroute*) (listener.cpp:151)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6386d40 is 16 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x78262D8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x407996: parseICMP(Traceroute*) (listener.cpp:144)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x78262d8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x746D7B8 by thread #2
==24227== Locks held: none
==24227==    at 0x408AE0: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:915)
==24227==    by 0x4079FE: parseICMP(Traceroute*) (listener.cpp:148)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x746d7b8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x746D7B8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B10: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x4079FE: parseICMP(Traceroute*) (listener.cpp:148)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x746d7b8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA5FFD60 by thread #1
==24227== Locks held: none
==24227==    at 0x40B4F7: std::vector<Hop, std::allocator<Hop> >::end() const (stl_vector.h:575)
==24227==    by 0x40AB3D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0xa5ffd60 is 368 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA5FFD58 by thread #1
==24227== Locks held: none
==24227==    at 0x40B4A3: std::vector<Hop, std::allocator<Hop> >::begin() const (stl_vector.h:557)
==24227==    by 0x40AB4C: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0xa5ffd58 is 360 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0xB504AAC by thread #1
==24227== Locks held: none
==24227==    at 0x423085: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:331)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xb504aac is 44 bytes inside a block of size 64 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x408F01: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:412)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227==  Lock at 0x71BAFA0 was first observed
==24227==    at 0x4C33785: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x4087D5: PfxState::PfxState() (scheduler.h:109)
==24227==    by 0x40BC3D: std::pair<unsigned int const, PfxState>::pair<unsigned int const&, 0ul>(std::tuple<unsigned int const&>&, std::tuple<>&, std::_Index_tuple<0ul>, std::_Index_tuple<>) (tuple:1172)
==24227==    by 0x40B803: std::pair<unsigned int const, PfxState>::pair<unsigned int const&>(std::piecewise_construct_t, std::tuple<unsigned int const&>, std::tuple<>) (tuple:1161)
==24227==    by 0x40B198: _ZN9__gnu_cxx13new_allocatorISt4pairIKj8PfxStateEE9constructIS4_IRKSt21piecewise_construct_tSt5tupleIIRS2_EESA_IIEEEEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40A76B: _ZNSt16allocator_traitsISaISt4pairIKj8PfxStateEEE9constructIS3_IRKSt21piecewise_construct_tSt5tupleIIRS1_EESA_IIEEEEEvRS4_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x409CE7: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1955)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x71bafa0 is 80 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== Possible data race during read of size 8 at 0x9CDD210 by thread #1
==24227== Locks held: 1, at address 0x71BAFA0
==24227==    at 0x4088A5: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:424)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x4088FE: std::vector<Flow, std::allocator<Flow> >::~vector() (stl_vector.h:424)
==24227==    by 0x40AE1D: IPState::~IPState() (scheduler.h:91)
==24227==    by 0x40AE3D: std::pair<unsigned char, IPState>::~pair() (stl_pair.h:96)
==24227==    by 0x42A023: void __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::destroy<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>*) (new_allocator.h:124)
==24227==    by 0x42851A: void std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::destroy<std::pair<unsigned char, IPState> >(std::allocator<std::pair<unsigned char, IPState> >&, std::pair<unsigned char, IPState>*) (alloc_traits.h:542)
==24227==    by 0x426D33: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_erase(__gnu_cxx::__normal_iterator<std::pair<unsigned char, IPState>*, std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > > >) (vector.tcc:147)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x9cdd210 is 400 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x7DC6899 by thread #1
==24227== Locks held: none
==24227==    at 0x424988: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:692)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7dc6899 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA605F60 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x4229A3: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:259)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x41EAA4: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:119)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0xa605f60 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xC048C48 by thread #1
==24227== Locks held: none
==24227==    at 0x42B178: _ZSt10_ConstructI3HopIRS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x42BD6E: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x42B5A8: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x42A688: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x428D61: void std::vector<Hop, std::allocator<Hop> >::_M_range_insert<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, std::forward_iterator_tag) (vector.tcc:667)
==24227==    by 0x4272CA: void std::vector<Hop, std::allocator<Hop> >::_M_insert_dispatch<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, std::__false_type) (stl_vector.h:1377)
==24227==    by 0x426049: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::vector<Hop, std::allocator<Hop> >::insert<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, void>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_vector.h:1099)
==24227==    by 0x422CFC: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:281)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc048c48 is 136 bytes inside a block of size 256 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x90CEC78 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408FEC: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:441)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x90cec78 is 40 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x95F6D18 by thread #1
==24227== Locks held: none
==24227==    at 0x41E8BA: std::vector<Hop, std::allocator<Hop> >::operator[](unsigned long) (stl_vector.h:780)
==24227==    by 0x423067: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:330)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408FEC: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:441)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x95f6d18 is 40 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0xC638F91 by thread #1
==24227== Locks held: none
==24227==    at 0x422A1D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:261)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc638f91 is 97 bytes inside a block of size 128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0xC638F94 by thread #1
==24227== Locks held: none
==24227==    at 0x422A8C: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:262)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc638f94 is 100 bytes inside a block of size 128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0xC638F92 by thread #1
==24227== Locks held: none
==24227==    at 0x425FA1: short const& std::min<short>(short const&, short const&) (stl_algobase.h:200)
==24227==    by 0x422B45: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:265)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc638f92 is 98 bytes inside a block of size 128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== Process terminating with default action of signal 2 (SIGINT)
==24227==    at 0x5DE830D: ??? (syscall-template.S:84)
==24227==    by 0x5E19D93: usleep (usleep.c:32)
==24227==    by 0x41C088: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:79)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== ERROR SUMMARY: 1989470 errors from 141 contexts (suppressed: 1550221 from 35)
==24227== 
==24227== 1 errors in context 1 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x95F6D18 by thread #1
==24227== Locks held: none
==24227==    at 0x41E8BA: std::vector<Hop, std::allocator<Hop> >::operator[](unsigned long) (stl_vector.h:780)
==24227==    by 0x423067: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:330)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408FEC: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:441)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x95f6d18 is 40 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 1 errors in context 2 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xC048C48 by thread #1
==24227== Locks held: none
==24227==    at 0x42B178: _ZSt10_ConstructI3HopIRS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x42BD6E: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x42B5A8: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x42A688: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x428D61: void std::vector<Hop, std::allocator<Hop> >::_M_range_insert<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, std::forward_iterator_tag) (vector.tcc:667)
==24227==    by 0x4272CA: void std::vector<Hop, std::allocator<Hop> >::_M_insert_dispatch<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, std::__false_type) (stl_vector.h:1377)
==24227==    by 0x426049: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::vector<Hop, std::allocator<Hop> >::insert<__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, void>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_vector.h:1099)
==24227==    by 0x422CFC: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:281)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc048c48 is 136 bytes inside a block of size 256 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 1 errors in context 3 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227==  Lock at 0x71BAFA0 was first observed
==24227==    at 0x4C33785: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x4087D5: PfxState::PfxState() (scheduler.h:109)
==24227==    by 0x40BC3D: std::pair<unsigned int const, PfxState>::pair<unsigned int const&, 0ul>(std::tuple<unsigned int const&>&, std::tuple<>&, std::_Index_tuple<0ul>, std::_Index_tuple<>) (tuple:1172)
==24227==    by 0x40B803: std::pair<unsigned int const, PfxState>::pair<unsigned int const&>(std::piecewise_construct_t, std::tuple<unsigned int const&>, std::tuple<>) (tuple:1161)
==24227==    by 0x40B198: _ZN9__gnu_cxx13new_allocatorISt4pairIKj8PfxStateEE9constructIS4_IRKSt21piecewise_construct_tSt5tupleIIRS2_EESA_IIEEEEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40A76B: _ZNSt16allocator_traitsISaISt4pairIKj8PfxStateEEE9constructIS3_IRKSt21piecewise_construct_tSt5tupleIIRS1_EESA_IIEEEEEvRS4_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x409CE7: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1955)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x71bafa0 is 80 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== Possible data race during read of size 8 at 0x9CDD210 by thread #1
==24227== Locks held: 1, at address 0x71BAFA0
==24227==    at 0x4088A5: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:424)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x4088FE: std::vector<Flow, std::allocator<Flow> >::~vector() (stl_vector.h:424)
==24227==    by 0x40AE1D: IPState::~IPState() (scheduler.h:91)
==24227==    by 0x40AE3D: std::pair<unsigned char, IPState>::~pair() (stl_pair.h:96)
==24227==    by 0x42A023: void __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::destroy<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>*) (new_allocator.h:124)
==24227==    by 0x42851A: void std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::destroy<std::pair<unsigned char, IPState> >(std::allocator<std::pair<unsigned char, IPState> >&, std::pair<unsigned char, IPState>*) (alloc_traits.h:542)
==24227==    by 0x426D33: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_erase(__gnu_cxx::__normal_iterator<std::pair<unsigned char, IPState>*, std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > > >) (vector.tcc:147)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x9cdd210 is 400 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 1 errors in context 4 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8160 by thread #2
==24227== Locks held: none
==24227==    at 0x417ED0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192EB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8160 is 160 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1 errors in context 5 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8168 by thread #2
==24227== Locks held: none
==24227==    at 0x416BA4: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned short const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x415F14: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:592)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192DF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8168 is 168 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1 errors in context 6 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x409260: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:592)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1 errors in context 7 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8170 by thread #1
==24227== Locks held: none
==24227==    at 0x4191B7: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1976)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8170 is 176 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1 errors in context 8 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8200 by thread #1
==24227== Locks held: none
==24227==    at 0x40B237: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1976)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8200 is 16 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2 errors in context 9 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x90CEC78 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408FEC: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:441)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x90cec78 is 40 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 2 errors in context 10 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA522148 by thread #1
==24227== Locks held: none
==24227==    at 0x4088AD: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:424)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0xa522148 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 2 errors in context 11 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227==  Lock at 0x7A6E9D0 was first observed
==24227==    at 0x4C33785: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x4087D5: PfxState::PfxState() (scheduler.h:109)
==24227==    by 0x40BC3D: std::pair<unsigned int const, PfxState>::pair<unsigned int const&, 0ul>(std::tuple<unsigned int const&>&, std::tuple<>&, std::_Index_tuple<0ul>, std::_Index_tuple<>) (tuple:1172)
==24227==    by 0x40B803: std::pair<unsigned int const, PfxState>::pair<unsigned int const&>(std::piecewise_construct_t, std::tuple<unsigned int const&>, std::tuple<>) (tuple:1161)
==24227==    by 0x40B198: _ZN9__gnu_cxx13new_allocatorISt4pairIKj8PfxStateEE9constructIS4_IRKSt21piecewise_construct_tSt5tupleIIRS2_EESA_IIEEEEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40A76B: _ZNSt16allocator_traitsISaISt4pairIKj8PfxStateEEE9constructIS3_IRKSt21piecewise_construct_tSt5tupleIIRS1_EESA_IIEEEEEvRS4_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x409CE7: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1955)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x7a6e9d0 is 80 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== Possible data race during read of size 8 at 0x7A6EA68 by thread #1
==24227== Locks held: 1, at address 0x7A6E9D0
==24227==    at 0x4088E9: std::vector<Flow, std::allocator<Flow> >::~vector() (stl_vector.h:424)
==24227==    by 0x40AE1D: IPState::~IPState() (scheduler.h:91)
==24227==    by 0x40AE3D: std::pair<unsigned char, IPState>::~pair() (stl_pair.h:96)
==24227==    by 0x42A023: void __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::destroy<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>*) (new_allocator.h:124)
==24227==    by 0x42851A: void std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::destroy<std::pair<unsigned char, IPState> >(std::allocator<std::pair<unsigned char, IPState> >&, std::pair<unsigned char, IPState>*) (alloc_traits.h:542)
==24227==    by 0x426D33: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_erase(__gnu_cxx::__normal_iterator<std::pair<unsigned char, IPState>*, std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > > >) (vector.tcc:147)
==24227==    by 0x425942: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::erase(__gnu_cxx::__normal_iterator<std::pair<unsigned char, IPState> const*, std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > > >) (stl_vector.h:1147)
==24227==    by 0x421DFD: PfxState::delFromIPMap(unsigned int) (scheduler.cpp:90)
==24227==    by 0x424B16: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:712)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7a6ea68 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2 errors in context 12 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1128 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1128 is 296 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 2 errors in context 13 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1130 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1130 is 304 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 3 errors in context 14 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0xB504AAC by thread #1
==24227== Locks held: none
==24227==    at 0x423085: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:331)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xb504aac is 44 bytes inside a block of size 64 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x408F01: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:412)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 3 errors in context 15 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA5FFD58 by thread #1
==24227== Locks held: none
==24227==    at 0x40B4A3: std::vector<Hop, std::allocator<Hop> >::begin() const (stl_vector.h:557)
==24227==    by 0x40AB4C: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0xa5ffd58 is 360 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 3 errors in context 16 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA5FFD60 by thread #1
==24227== Locks held: none
==24227==    at 0x40B4F7: std::vector<Hop, std::allocator<Hop> >::end() const (stl_vector.h:575)
==24227==    by 0x40AB3D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0xa5ffd60 is 368 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 3 errors in context 17 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9AB5F58 by thread #2
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2E6: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:105)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x40BEE1: _ZSt10_ConstructI4FlowIS0_EEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40BA93: Flow* std::__uninitialized_copy<false>::__uninit_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:75)
==24227==    by 0x40B610: Flow* std::uninitialized_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:126)
==24227==    by 0x40AC82: Flow* std::__uninitialized_copy_a<std::move_iterator<Flow*>, Flow*, Flow>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:281)
==24227==    by 0x40A165: Flow* std::__uninitialized_move_if_noexcept_a<Flow*, Flow*, std::allocator<Flow> >(Flow*, Flow*, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:304)
==24227==    by 0x40940B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:420)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==  Address 0x9ab5f58 is 184 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 4 errors in context 18 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6E15580 by thread #2
==24227== Locks held: none
==24227==    at 0x409B5B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6e15580 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 5 errors in context 19 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0xC638F92 by thread #1
==24227== Locks held: none
==24227==    at 0x425FA1: short const& std::min<short>(short const&, short const&) (stl_algobase.h:200)
==24227==    by 0x422B45: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:265)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc638f92 is 98 bytes inside a block of size 128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 5 errors in context 20 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0xC638F94 by thread #1
==24227== Locks held: none
==24227==    at 0x422A8C: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:262)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc638f94 is 100 bytes inside a block of size 128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 5 errors in context 21 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0xC638F91 by thread #1
==24227== Locks held: none
==24227==    at 0x422A1D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:261)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x41EA93: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:118)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0xc638f91 is 97 bytes inside a block of size 128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x41F603: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:353)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 5 errors in context 22 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x9706AA4 by thread #1
==24227== Locks held: none
==24227==    at 0x423068: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:330)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x9706aa4 is 4 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 6 errors in context 23 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA605F60 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x4229A3: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:259)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x41EAA4: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:119)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0xa605f60 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 6 errors in context 24 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x9706AA1 by thread #1
==24227== Locks held: none
==24227==    at 0x423003: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:327)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x9706aa1 is 1 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 6 errors in context 25 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0xA00DCE0 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408A64: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:919)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0xa00dce0 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 6 errors in context 26 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x409260: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:592)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 6 errors in context 27 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D64A78 by thread #1
==24227== Locks held: none
==24227==    at 0x4182CF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1470)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FCE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d64a78 is 28,552 bytes inside a block of size 29,912 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 7 errors in context 28 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F0 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5A8: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B36B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f0 is 0 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 7 errors in context 29 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F81F0 by thread #1
==24227== Locks held: none
==24227==    at 0x40B36B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A54: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60f81f0 is 0 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 7 errors in context 30 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F81F8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x4090EB: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1338)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 7 errors in context 31 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D8D670 by thread #2
==24227== Locks held: none
==24227==    at 0x416FF8: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>::_M_next() const (hashtable_policy.h:296)
==24227==    by 0x416073: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1353)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d8d670 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 7 errors in context 32 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D64A78 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FCE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d64a78 is 28,552 bytes inside a block of size 29,912 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 8 errors in context 33 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x7ADE728 by thread #2
==24227== Locks held: none
==24227==    at 0x408B10: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x428742: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1439)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x7ade728 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 9 errors in context 34 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x93F1124 by thread #1
==24227== Locks held: none
==24227==    at 0x409F5C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1124 is 292 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 9 errors in context 35 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1122 by thread #1
==24227== Locks held: none
==24227==    at 0x409F4C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1122 is 290 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 9 errors in context 36 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1120 by thread #1
==24227== Locks held: none
==24227==    at 0x409F3E: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1120 is 288 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 10 errors in context 37 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 4 at 0x9B2A454 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40C0D1: _ZSt10_ConstructI3HopIRKS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x40BDBE: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x40BA23: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x40B55A: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x40AB5D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==  Address 0x9b2a454 is 4 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 11 errors in context 38 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x73CBD10 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5FF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1436)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x73cbd10 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 11 errors in context 39 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x710D6C0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A8C: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>::_M_next() const (hashtable_policy.h:296)
==24227==    by 0x409161: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x710d6c0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 11 errors in context 40 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8160 by thread #1
==24227== Locks held: none
==24227==    at 0x4192EB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FC0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8160 is 160 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 11 errors in context 41 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8168 by thread #1
==24227== Locks held: none
==24227==    at 0x4192DF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416BA4: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned short const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x415FFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1338)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8168 is 168 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 12 errors in context 42 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9AB5EB0 by thread #2
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2CB: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:104)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x40BEE1: _ZSt10_ConstructI4FlowIS0_EEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40BA93: Flow* std::__uninitialized_copy<false>::__uninit_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:75)
==24227==    by 0x40B610: Flow* std::uninitialized_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:126)
==24227==    by 0x40AC82: Flow* std::__uninitialized_copy_a<std::move_iterator<Flow*>, Flow*, Flow>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:281)
==24227==    by 0x40A165: Flow* std::__uninitialized_move_if_noexcept_a<Flow*, Flow*, std::allocator<Flow> >(Flow*, Flow*, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:304)
==24227==    by 0x40940B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:420)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422152: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:138)
==24227==  Address 0x9ab5eb0 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 12 errors in context 43 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9AB5EA8 by thread #2
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2B0: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:103)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x40BEE1: _ZSt10_ConstructI4FlowIS0_EEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40BA93: Flow* std::__uninitialized_copy<false>::__uninit_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:75)
==24227==    by 0x40B610: Flow* std::uninitialized_copy<std::move_iterator<Flow*>, Flow*>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*) (stl_uninitialized.h:126)
==24227==    by 0x40AC82: Flow* std::__uninitialized_copy_a<std::move_iterator<Flow*>, Flow*, Flow>(std::move_iterator<Flow*>, std::move_iterator<Flow*>, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:281)
==24227==    by 0x40A165: Flow* std::__uninitialized_move_if_noexcept_a<Flow*, Flow*, std::allocator<Flow> >(Flow*, Flow*, Flow*, std::allocator<Flow>&) (stl_uninitialized.h:304)
==24227==    by 0x40940B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:420)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422152: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:138)
==24227==  Address 0x9ab5ea8 is 8 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 14 errors in context 44 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x9914BC4 by thread #1
==24227== Locks held: none
==24227==    at 0x42B0D3: Hop* std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m<Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:340)
==24227==    by 0x42A097: Hop* std::__copy_move_a<false, Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:402)
==24227==    by 0x4285A4: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:438)
==24227==    by 0x426EB9: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:472)
==24227==    by 0x425BC0: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:206)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9914bc4 is 4 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 14 errors in context 45 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1148 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x425A77: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:191)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1148 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 14 errors in context 46 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x93F1144 by thread #1
==24227== Locks held: none
==24227==    at 0x42511E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1144 is 324 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 14 errors in context 47 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1142 by thread #1
==24227== Locks held: none
==24227==    at 0x42510E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1142 is 322 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 14 errors in context 48 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1140 by thread #1
==24227== Locks held: none
==24227==    at 0x425100: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1140 is 320 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 15 errors in context 49 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x79F56A0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A8C: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>::_M_next() const (hashtable_policy.h:296)
==24227==    by 0x409195: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1344)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x79f56a0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 16 errors in context 50 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x9613458 by thread #1
==24227== Locks held: none
==24227==    at 0x408BCE: std::_Vector_base<Hop, std::allocator<Hop> >::~_Vector_base() (stl_vector.h:161)
==24227==    by 0x4088C6: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:425)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B972: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x9613458 is 344 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 20 errors in context 51 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 2 at 0x9B2A450 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40C0D1: _ZSt10_ConstructI3HopIRKS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x40BDBE: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x40BA23: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x40B55A: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x40AB5D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==  Address 0x9b2a450 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 23 errors in context 52 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x628D5F0 by thread #2
==24227== Locks held: none
==24227==    at 0x409B5B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40775E: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x628d5f0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 28 errors in context 53 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x9914BC0 by thread #1
==24227== Locks held: none
==24227==    at 0x42B0D3: Hop* std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m<Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:340)
==24227==    by 0x42A097: Hop* std::__copy_move_a<false, Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:402)
==24227==    by 0x4285A4: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:438)
==24227==    by 0x426EB9: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:472)
==24227==    by 0x425BC0: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:206)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9914bc0 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 30 errors in context 54 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D4F0 by thread #2
==24227== Locks held: none
==24227==    at 0x416BFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413E2F: Traceroute::tracePkt(unsigned short) (trace.cpp:54)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d2d4f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 30 errors in context 55 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D4F0 by thread #2
==24227== Locks held: none
==24227==    at 0x416BFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d2d4f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 35 errors in context 56 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x93F1164 by thread #1
==24227== Locks held: none
==24227==    at 0x409F5C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1164 is 356 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 35 errors in context 57 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1162 by thread #1
==24227== Locks held: none
==24227==    at 0x409F4C: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1162 is 354 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 35 errors in context 58 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x93F1160 by thread #1
==24227== Locks held: none
==24227==    at 0x409F3E: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x93f1160 is 352 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 38 errors in context 59 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8170 by thread #1
==24227== Locks held: none
==24227==    at 0x41922F: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1985)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8170 is 176 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 41 errors in context 60 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x977AD42 by thread #1
==24227== Locks held: none
==24227==    at 0x4220F1: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x977ad42 is 2 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 41 errors in context 61 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x9167740 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x9167740 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 42 errors in context 62 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x640D0E0 by thread #1
==24227== Locks held: none
==24227==    at 0x40A98A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1469)
==24227==    by 0x409E75: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1607)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5B6: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x640d0e0 is 11,600 bytes inside a block of size 121,384 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40BC92: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x40B868: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x40B21E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 42 errors in context 63 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60FD610 by thread #1
==24227== Locks held: none
==24227==    at 0x4089E5: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x4240B8: Scheduler::chkResponse(unsigned int, PfxState*, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:569)
==24227==    by 0x4245BB: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:646)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40947B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:441)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd610 is 16 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 42 errors in context 64 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60FD618 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x4240B8: Scheduler::chkResponse(unsigned int, PfxState*, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:569)
==24227==    by 0x4245BB: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:646)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409486: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:442)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd618 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 42 errors in context 65 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1168 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1168 is 360 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 42 errors in context 66 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x93F1170 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x40AAF9: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E58: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426788: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5428)
==24227==    by 0x425603: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::min_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5478)
==24227==    by 0x4219EE: getMinFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:45)
==24227==    by 0x42208A: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:132)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Address 0x93f1170 is 368 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 43 errors in context 67 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x628D5F0 by thread #2
==24227== Locks held: none
==24227==    at 0x409B5B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:634)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x628d5f0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 44 errors in context 68 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x9697640 by thread #1
==24227== Locks held: none
==24227==    at 0x40C0D1: _ZSt10_ConstructI3HopIRKS0_EEvPT_DpOT0_ (stl_construct.h:75)
==24227==    by 0x40BDBE: Hop* std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:75)
==24227==    by 0x40BA23: Hop* std::uninitialized_copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*) (stl_uninitialized.h:126)
==24227==    by 0x40B55A: Hop* std::__uninitialized_copy_a<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, Hop>(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop*, std::allocator<Hop>&) (stl_uninitialized.h:281)
==24227==    by 0x40AB5D: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:322)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x427E3A: bool __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>::operator()<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x426860: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::__max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)> >(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Flow, Flow)>) (stl_algo.h:5490)
==24227==    by 0x42569D: __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > > std::max_element<__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)>(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, bool (*)(Flow, Flow)) (stl_algo.h:5540)
==24227==    by 0x421AAE: getMaxFlow(std::vector<Flow, std::allocator<Flow> >&, int, int) (scheduler.cpp:51)
==24227==    by 0x422003: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:127)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==  Address 0x9697640 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 56 errors in context 69 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D3AC90 by thread #1
==24227== Locks held: none
==24227==    at 0x413D5B: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x413DE7: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d3ac90 is 16 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 59 errors in context 70 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8200 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2AF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1985)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8200 is 16 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 75 errors in context 71 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x702D4F8 by thread #2
==24227== Locks held: none
==24227==    at 0x40AF46: std::equal_to<unsigned int>::operator()(unsigned int const&, unsigned int const&) const (stl_function.h:357)
==24227==    by 0x40A4D7: std::__detail::_Equal_helper<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, unsigned long, false>::_S_equals(std::equal_to<unsigned int> const&, std::__detail::_Select1st const&, unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x409AE5: std::__detail::_Hashtable_base<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x40A5F0: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1433)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x4077C1: parseICMP(Traceroute*) (listener.cpp:118)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x702d4f8 is 8 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 79 errors in context 72 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D35690 by thread #2
==24227== Locks held: none
==24227==    at 0x417EFA: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x6d35690 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 87 errors in context 73 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x62A8240 by thread #1
==24227== Locks held: none
==24227==    at 0x4089E5: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x421F6E: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:112)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40947B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:441)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x62a8240 is 16 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 90 errors in context 74 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x6386D40 by thread #2
==24227== Locks held: none
==24227==    at 0x407A6B: parseICMP(Traceroute*) (listener.cpp:151)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6386d40 is 16 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 91 errors in context 75 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D7A0 by thread #2
==24227== Locks held: none
==24227==    at 0x417EDE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6d2d7a0 is 208 bytes inside a block of size 376 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 99 errors in context 76 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x6D356F8 by thread #2
==24227== Locks held: none
==24227==    at 0x419327: std::equal_to<unsigned short>::operator()(unsigned short const&, unsigned short const&) const (stl_function.h:357)
==24227==    by 0x41834F: std::__detail::_Equal_helper<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, unsigned long, false>::_S_equals(std::equal_to<unsigned short> const&, std::__detail::_Select1st const&, unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x417051: std::__detail::_Hashtable_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x417F18: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:1433)
==24227==    by 0x416BED: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned short const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x415F30: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:593)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413DE6: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d356f8 is 8 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 102 errors in context 77 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x7DC6899 by thread #1
==24227== Locks held: none
==24227==    at 0x424988: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:692)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7dc6899 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 142 errors in context 78 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x7331EE9 by thread #1
==24227== Locks held: none
==24227==    at 0x4248C6: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:683)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7331ee9 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 142 errors in context 79 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x95B6110 by thread #1
==24227== Locks held: none
==24227==    at 0x427ABC: std::vector<Hop, std::allocator<Hop> >::_M_erase_at_end(Hop*) (stl_vector.h:1439)
==24227==    by 0x4264E7: std::vector<Hop, std::allocator<Hop> >::clear() (stl_vector.h:1212)
==24227==    by 0x424892: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:681)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408FF7: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:442)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x95b6110 is 48 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 145 errors in context 80 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8160 by thread #2
==24227== Locks held: none
==24227==    at 0x416FC0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192EB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8160 is 160 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 145 errors in context 81 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F8168 by thread #2
==24227== Locks held: none
==24227==    at 0x416BA4: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned short const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x415FFD: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1338)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4192DF: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==  Address 0x60f8168 is 168 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 207 errors in context 82 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A54: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B36B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2001)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f0 is 0 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 207 errors in context 83 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x60F81F8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A2A: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(unsigned int const&, unsigned long) const (hashtable.h:621)
==24227==    by 0x4090EB: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1338)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B35F: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:2000)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x60f81f8 is 8 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 255 errors in context 84 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x62A8248 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x421F6E: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:112)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409486: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:442)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x62a8248 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 290 errors in context 85 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x6E5C209 by thread #1
==24227== Locks held: none
==24227==    at 0x424740: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:663)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6e5c209 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 340 errors in context 86 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6113B38 by thread #2
==24227== Locks held: none
==24227==    at 0x408AE0: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:915)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x428742: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1439)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x6113b38 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 341 errors in context 87 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x746D7B8 by thread #2
==24227== Locks held: none
==24227==    at 0x408AE0: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:915)
==24227==    by 0x4079FE: parseICMP(Traceroute*) (listener.cpp:148)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x746d7b8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 356 errors in context 88 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x746D7B8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B10: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x4079FE: parseICMP(Traceroute*) (listener.cpp:148)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x746d7b8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 570 errors in context 89 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x960D5A8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B9A8: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x425A77: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:191)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x960d5a8 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 617 errors in context 90 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x945D4E8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B9D0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:187)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x408BCE: std::_Vector_base<Hop, std::allocator<Hop> >::~_Vector_base() (stl_vector.h:161)
==24227==    by 0x4088C6: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:425)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==  Address 0x945d4e8 is 344 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 617 errors in context 91 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x945D4E0 by thread #2
==24227== Locks held: none
==24227==    at 0x40B9B6: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:186)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x945d4e0 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 624 errors in context 92 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x90E6720 by thread #2
==24227== Locks held: none
==24227==    at 0x40AB65: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:321)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x90e6720 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 718 errors in context 93 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x640D670 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5B6: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1426)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40775E: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x640d670 is 13,024 bytes inside a block of size 121,384 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40BC92: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x40B868: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x40B21E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 766 errors in context 94 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6EC8780 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6ec8780 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 795 errors in context 95 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x60FD609 by thread #1
==24227== Locks held: none
==24227==    at 0x4245FE: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:649)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #2
==24227== Locks held: none
==24227==    at 0x40785E: parseICMP(Traceroute*) (listener.cpp:128)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd609 is 9 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 954 errors in context 96 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x62D1AC8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A549: std::__detail::_Hash_code_base<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> const*, unsigned long) const (hashtable_policy.h:1180)
==24227==    by 0x409B18: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) const (hashtable.h:617)
==24227==    by 0x409173: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x62d1ac8 is 8 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1405 errors in context 97 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6155DA0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A62: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6155da0 is 10,032 bytes inside a block of size 13,928 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40BC92: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x40B868: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x40B21E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1422 errors in context 98 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x78262D8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x407996: parseICMP(Traceroute*) (listener.cpp:144)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x78262d8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1967 errors in context 99 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x6D2D898 by thread #2
==24227== Locks held: none
==24227==    at 0x419327: std::equal_to<unsigned short>::operator()(unsigned short const&, unsigned short const&) const (stl_function.h:357)
==24227==    by 0x41834F: std::__detail::_Equal_helper<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, unsigned long, false>::_S_equals(std::equal_to<unsigned short> const&, std::__detail::_Select1st const&, unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x417051: std::__detail::_Hashtable_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned short const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x416049: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1346)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d898 is 8 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 1968 errors in context 100 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 2 at 0x6D2D218 by thread #2
==24227== Locks held: none
==24227==    at 0x4183C1: std::__detail::_Hash_code_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::__detail::_Select1st, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> const*, unsigned long) const (hashtable_policy.h:1180)
==24227==    by 0x417084: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_index(std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) const (hashtable.h:617)
==24227==    by 0x416085: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1353)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6d2d218 is 8 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2088 errors in context 101 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D890 by thread #2
==24227== Locks held: none
==24227==    at 0x416060: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1353)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d890 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2131 errors in context 102 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D8F0 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2131 errors in context 103 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D7A0 by thread #2
==24227== Locks held: none
==24227==    at 0x416FCE: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:787)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4182B2: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1469)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==  Address 0x6d2d7a0 is 208 bytes inside a block of size 376 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40C1A9: __gnu_cxx::new_allocator<std::__detail::_Hash_node_base*>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40BF78: std::allocator_traits<std::allocator<std::__detail::_Hash_node_base*> >::allocate(std::allocator<std::__detail::_Hash_node_base*>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x419E9C: std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_buckets(unsigned long) (hashtable_policy.h:1996)
==24227==    by 0x419BA8: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_allocate_buckets(unsigned long) (hashtable.h:347)
==24227==    by 0x41919E: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1974)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2191 errors in context 104 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x6168990 by thread #2
==24227== Locks held: none
==24227==    at 0x40775F: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6168990 is 16 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2260 errors in context 105 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 4 at 0x6231488 by thread #2
==24227== Locks held: none
==24227==    at 0x40AF46: std::equal_to<unsigned int>::operator()(unsigned int const&, unsigned int const&) const (stl_function.h:357)
==24227==    by 0x40A4D7: std::__detail::_Equal_helper<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, unsigned long, false>::_S_equals(std::equal_to<unsigned int> const&, std::__detail::_Select1st const&, unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable_policy.h:1333)
==24227==    by 0x409AE5: std::__detail::_Hashtable_base<unsigned int, std::pair<unsigned int const, PfxState>, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Hashtable_traits<false, false, true> >::_M_equals(unsigned int const&, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) const (hashtable_policy.h:1704)
==24227==    by 0x409137: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1346)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6231488 is 8 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2456 errors in context 106 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D1E9E8 by thread #1
==24227== Locks held: none
==24227==    at 0x428742: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1439)
==24227==    by 0x4270CE: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:160)
==24227==    by 0x425D4F: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >, __gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1177)
==24227==    by 0x422241: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:140)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d1e9e8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2494 errors in context 107 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6231480 by thread #2
==24227== Locks held: none
==24227==    at 0x40914E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x6231480 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 2555 errors in context 108 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x61BD2B0 by thread #2
==24227== Locks held: none
==24227==    at 0x409A74: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==  Address 0x61bd2b0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 4525 errors in context 109 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x7026CD0 by thread #1
==24227== Locks held: none
==24227==    at 0x40B31E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1993)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40914E: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1353)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7026cd0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 4691 errors in context 110 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x7082210 by thread #1
==24227== Locks held: none
==24227==    at 0x40B33B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1994)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x409A74: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x409102: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned int const&) const (hashtable.h:1339)
==24227==    by 0x408AA2: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::count(unsigned int const&) const (unordered_map.h:633)
==24227==    by 0x407740: parseICMP(Traceroute*) (listener.cpp:112)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x7082210 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 6756 errors in context 111 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D32C70 by thread #2
==24227== Locks held: none
==24227==    at 0x409813: _ZN9__gnu_cxx13new_allocatorI3HopE9constructIS1_IRKS1_EEEvPT_DpOT0_ (new_allocator.h:120)
==24227==    by 0x408EBF: _ZNSt16allocator_traitsISaI3HopEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408A53: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:917)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x42B0D6: Hop* std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m<Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:340)
==24227==    by 0x42A097: Hop* std::__copy_move_a<false, Hop const*, Hop*>(Hop const*, Hop const*, Hop*) (stl_algobase.h:402)
==24227==    by 0x4285A4: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:438)
==24227==    by 0x426EB9: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > std::copy<__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > > >(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >) (stl_algobase.h:472)
==24227==    by 0x425BC0: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:206)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x422476: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:163)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==  Address 0x6d32c70 is 0 bytes inside a block of size 8 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40AEC3: __gnu_cxx::new_allocator<Hop>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A3A5: std::allocator_traits<std::allocator<Hop> >::allocate(std::allocator<Hop>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409933: std::_Vector_base<Hop, std::allocator<Hop> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x40B9A0: std::_Vector_base<Hop, std::allocator<Hop> >::_M_create_storage(unsigned long) (stl_vector.h:185)
==24227==    by 0x40B460: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:136)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x4093D9: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:416)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 7858 errors in context 112 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8170 by thread #1
==24227== Locks held: none
==24227==    at 0x418271: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1465)
==24227==    by 0x416EFB: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1607)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8170 is 176 bytes inside a block of size 240 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x41C33C: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 7964 errors in context 113 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6D2D8F0 by thread #1
==24227== Locks held: none
==24227==    at 0x419224: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x418107: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x416E8D: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>*) (hashtable.h:1600)
==24227==    by 0x415F83: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:600)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x416FE0: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_bucket_begin(unsigned long) const (hashtable.h:788)
==24227==    by 0x416014: std::_Hashtable<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::count(unsigned short const&) const (hashtable.h:1339)
==24227==    by 0x4157BC: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::count(unsigned short const&) const (unordered_map.h:633)
==24227==    by 0x413DBD: Traceroute::tracePkt(unsigned short) (trace.cpp:51)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6d2d8f0 is 0 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 8691 errors in context 114 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x6168990 by thread #2
==24227== Locks held: none
==24227==    at 0x407950: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6168990 is 16 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 9702 errors in context 115 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x6107FA0 by thread #1
==24227== Locks held: none
==24227==    at 0x40A92D: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1457)
==24227==    by 0x409E75: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1607)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x6107fa0 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 12514 errors in context 116 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038298 by thread #2
==24227== Locks held: none
==24227==    at 0x409012: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:443)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40C353: void std::swap<Hop*>(Hop*&, Hop*&) (move.h:187)
==24227==    by 0x40C2E6: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_M_swap_data(std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl&) (stl_vector.h:105)
==24227==    by 0x40C222: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(std::_Vector_base<Hop, std::allocator<Hop> >&&) (stl_vector.h:144)
==24227==    by 0x40C153: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> >&&) (stl_vector.h:336)
==24227==    by 0x40BE9D: Flow::Flow(Flow&&) (graph.h:112)
==24227==    by 0x425E14: void std::swap<Flow>(Flow&, Flow&) (move.h:185)
==24227==    by 0x4224AD: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:165)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==  Address 0x9038298 is 24 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 12514 errors in context 117 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038290 by thread #2
==24227== Locks held: none
==24227==    at 0x408FF7: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:442)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9038290 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 12514 errors in context 118 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038288 by thread #2
==24227== Locks held: none
==24227==    at 0x408FEC: void std::vector<Hop, std::allocator<Hop> >::_M_emplace_back_aux<Hop const&>(Hop const&) (vector.tcc:441)
==24227==    by 0x408A7C: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:923)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9038288 is 8 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 13077 errors in context 119 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9038290 by thread #2
==24227== Locks held: none
==24227==    at 0x408A64: std::vector<Hop, std::allocator<Hop> >::push_back(Hop const&) (stl_vector.h:919)
==24227==    by 0x4073FC: appendHop(std::vector<Flow, std::allocator<Flow> >&, unsigned short, unsigned short, Hop) (listener.cpp:30)
==24227==    by 0x40797E: parseICMP(Traceroute*) (listener.cpp:141)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x40994A: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x422FED: Scheduler::pathHopEst(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:326)
==24227==    by 0x424841: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:678)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x9038290 is 16 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 18097 errors in context 120 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x7106270 by thread #1
==24227== Locks held: none
==24227==    at 0x40B2A4: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash_aux(unsigned long, std::integral_constant<bool, true>) (hashtable.h:1984)
==24227==    by 0x40A7DF: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (hashtable.h:1953)
==24227==    by 0x409E07: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1600)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x7106270 is 0 bytes inside a block of size 136 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B039: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40A69F: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x409C46: std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned int const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned int const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x4092B3: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:597)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 21223 errors in context 121 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x62628E8 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x4079FE: parseICMP(Traceroute*) (listener.cpp:148)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x4271CF: std::vector<Flow, std::allocator<Flow> >::_M_range_check(unsigned long) const (stl_vector.h:802)
==24227==    by 0x425F4A: std::vector<Flow, std::allocator<Flow> >::at(unsigned long) (stl_vector.h:824)
==24227==    by 0x4226D8: hopEnumHelper(unsigned int, IPState*, int) (scheduler.cpp:228)
==24227==    by 0x422F40: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:314)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x62628e8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 37483 errors in context 122 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60F8200 by thread #1
==24227== Locks held: none
==24227==    at 0x40A949: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_bucket_begin(unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1465)
==24227==    by 0x409E75: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<unsigned int const, PfxState>, false>*) (hashtable.h:1607)
==24227==    by 0x4092CF: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:600)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x42344E: Scheduler::populateTarget() (scheduler.cpp:407)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #2
==24227== Locks held: none
==24227==    at 0x40A5D2: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_before_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:1430)
==24227==    by 0x409B4B: std::_Hashtable<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_find_node(unsigned long, unsigned int const&, unsigned long) const (hashtable.h:632)
==24227==    by 0x40927C: std::__detail::_Map_base<unsigned int, std::pair<unsigned int const, PfxState>, std::allocator<std::pair<unsigned int const, PfxState> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned int const&) (hashtable_policy.h:593)
==24227==    by 0x408AC8: std::unordered_map<unsigned int, PfxState, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, PfxState> > >::operator[](unsigned int const&) (unordered_map.h:668)
==24227==    by 0x40794F: parseICMP(Traceroute*) (listener.cpp:137)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==  Address 0x60f8200 is 16 bytes inside a block of size 1,128 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x413A7A: Traceroute::Traceroute(YarrpConfig*) (trace.cpp:16)
==24227==    by 0x41A395: Traceroute4::Traceroute4(YarrpConfig*) (trace4.cpp:8)
==24227==    by 0x41C351: main (yarrp.cpp:115)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 49879 errors in context 123 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x901ABF8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B972: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x408BCE: std::_Vector_base<Hop, std::allocator<Hop> >::~_Vector_base() (stl_vector.h:161)
==24227==    by 0x4088C6: std::vector<Hop, std::allocator<Hop> >::~vector() (stl_vector.h:425)
==24227==    by 0x408865: Flow::~Flow() (graph.h:112)
==24227==    by 0x40AD90: void std::_Destroy<Flow>(Flow*) (stl_construct.h:93)
==24227==    by 0x40A25E: void std::_Destroy_aux<false>::__destroy<Flow*>(Flow*, Flow*) (stl_construct.h:103)
==24227==    by 0x409665: void std::_Destroy<Flow*>(Flow*, Flow*) (stl_construct.h:126)
==24227==    by 0x408CE6: void std::_Destroy<Flow*, Flow>(Flow*, Flow*, std::allocator<Flow>&) (stl_construct.h:151)
==24227==    by 0x428739: std::vector<Flow, std::allocator<Flow> >::_M_erase_at_end(Flow*) (stl_vector.h:1438)
==24227==  Address 0x901abf8 is 344 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 49879 errors in context 124 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x901ABF0 by thread #2
==24227== Locks held: none
==24227==    at 0x40B966: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x41D2D8: __gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >::__normal_iterator(Hop* const&) (stl_iterator.h:741)
==24227==    by 0x41D051: std::vector<Hop, std::allocator<Hop> >::end() (stl_vector.h:566)
==24227==    by 0x41CEE0: std::vector<Hop, std::allocator<Hop> >::back() (stl_vector.h:868)
==24227==    by 0x4220F0: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:135)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abf0 is 336 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 49879 errors in context 125 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x901ABE8 by thread #2
==24227== Locks held: none
==24227==    at 0x40B95B: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_impl::_Vector_impl(std::allocator<Hop> const&) (stl_vector.h:91)
==24227==    by 0x40B44D: std::_Vector_base<Hop, std::allocator<Hop> >::_Vector_base(unsigned long, std::allocator<Hop> const&) (stl_vector.h:135)
==24227==    by 0x40AB0F: std::vector<Hop, std::allocator<Hop> >::vector(std::vector<Hop, std::allocator<Hop> > const&) (stl_vector.h:320)
==24227==    by 0x409F81: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x409955: std::vector<Hop, std::allocator<Hop> >::size() const (stl_vector.h:655)
==24227==    by 0x425A77: std::vector<Hop, std::allocator<Hop> >::operator=(std::vector<Hop, std::allocator<Hop> > const&) (vector.tcc:191)
==24227==    by 0x425143: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe8 is 328 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 49879 errors in context 126 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 1 at 0x901ABE4 by thread #2
==24227== Locks held: none
==24227==    at 0x409F64: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 1 by thread #1
==24227== Locks held: none
==24227==    at 0x42511E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe4 is 324 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 49879 errors in context 127 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 2 at 0x901ABE2 by thread #2
==24227== Locks held: none
==24227==    at 0x409F54: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 2 by thread #1
==24227== Locks held: none
==24227==    at 0x42510E: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe2 is 322 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 49879 errors in context 128 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 2 at 0x901ABE0 by thread #2
==24227== Locks held: none
==24227==    at 0x409F45: Flow::Flow(Flow const&) (graph.h:112)
==24227==    by 0x409FD1: _ZN9__gnu_cxx13new_allocatorI4FlowE9constructIS1_IRKS1_EEEvPT_DpOT0_ (in /home/yibo/Documents/flowmap/uncongested/lbmap/yarrp)
==24227==    by 0x40934F: _ZNSt16allocator_traitsISaI4FlowEE9constructIS0_IRKS0_EEEvRS1_PT_DpOT0_ (alloc_traits.h:530)
==24227==    by 0x408B0B: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:917)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 2 by thread #1
==24227== Locks held: none
==24227==    at 0x425100: Flow::operator=(Flow const&) (graph.h:112)
==24227==    by 0x42213C: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:136)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x901abe0 is 320 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 72347 errors in context 129 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD620 by thread #2
==24227== Locks held: none
==24227==    at 0x4094A0: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:443)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd620 is 32 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 72347 errors in context 130 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD618 by thread #2
==24227== Locks held: none
==24227==    at 0x409486: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:442)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd618 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 72347 errors in context 131 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD610 by thread #2
==24227== Locks held: none
==24227==    at 0x40947B: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:441)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x60fd610 is 16 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 86070 errors in context 132 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A0 by thread #2
==24227== Locks held: none
==24227==    at 0x41F229: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop&&) (vector.tcc:335)
==24227==    by 0x41EB37: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:128)
==24227==    by 0x41DF70: Flow::updateHop(unsigned int, Hop) (graph.cpp:26)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a0 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 96047 errors in context 133 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A8 by thread #2
==24227== Locks held: none
==24227==    at 0x41F752: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:399)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a8 is 88 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 96047 errors in context 134 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A0 by thread #2
==24227== Locks held: none
==24227==    at 0x41F737: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:398)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a0 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 96047 errors in context 135 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x9143698 by thread #2
==24227== Locks held: none
==24227==    at 0x41F72C: void std::vector<Hop, std::allocator<Hop> >::_M_insert_aux<Hop const&>(__gnu_cxx::__normal_iterator<Hop*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:397)
==24227==    by 0x41EB50: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:131)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x9143698 is 72 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 119133 errors in context 136 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x62628E8 by thread #2
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x407996: parseICMP(Traceroute*) (listener.cpp:144)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous write of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x427387: std::vector<Flow, std::allocator<Flow> >::_M_erase(__gnu_cxx::__normal_iterator<Flow*, std::vector<Flow, std::allocator<Flow> > >) (vector.tcc:146)
==24227==    by 0x426102: std::vector<Flow, std::allocator<Flow> >::erase(__gnu_cxx::__normal_iterator<Flow const*, std::vector<Flow, std::allocator<Flow> > >) (stl_vector.h:1147)
==24227==    by 0x422E2D: mergeFlow(std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:291)
==24227==    by 0x422EBF: Scheduler::pathEnumHop(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:299)
==24227==    by 0x424945: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:689)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x62628e8 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 149621 errors in context 137 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D8A0 by thread #2
==24227== Locks held: none
==24227==    at 0x40782D: parseICMP(Traceroute*) (listener.cpp:122)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8a0 is 16 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 149621 errors in context 138 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 1 at 0x6D2D8A8 by thread #2
==24227== Locks held: none
==24227==    at 0x4077FF: parseICMP(Traceroute*) (listener.cpp:121)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8a8 is 24 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 149621 errors in context 139 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during read of size 8 at 0x6D2D8A0 by thread #2
==24227== Locks held: none
==24227==    at 0x413DE7: Traceroute::tracePkt(unsigned short) (trace.cpp:52)
==24227==    by 0x4077A1: parseICMP(Traceroute*) (listener.cpp:117)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x6d2d8a0 is 16 bytes inside a block of size 32 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x418FAB: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x417FC7: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x416CCC: std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned short const, PktInfo>, false> > >::_M_allocate_node<std::piecewise_construct_t const&, std::tuple<unsigned short const&>, std::tuple<> >(std::piecewise_construct_t const&, std::tuple<unsigned short const&>&&, std::tuple<>&&) (hashtable_policy.h:1949)
==24227==    by 0x415F67: std::__detail::_Map_base<unsigned short, std::pair<unsigned short const, PktInfo>, std::allocator<std::pair<unsigned short const, PktInfo> >, std::__detail::_Select1st, std::equal_to<unsigned short>, std::hash<unsigned short>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[](unsigned short const&) (hashtable_policy.h:597)
==24227==    by 0x415796: std::unordered_map<unsigned short, PktInfo, std::hash<unsigned short>, std::equal_to<unsigned short>, std::allocator<std::pair<unsigned short const, PktInfo> > >::operator[](unsigned short const&) (unordered_map.h:668)
==24227==    by 0x413D3A: Traceroute::regPkt(unsigned char) (trace.cpp:41)
==24227==    by 0x41A759: Traceroute4::probe(sockaddr_in*, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:67)
==24227==    by 0x41A6EE: Traceroute4::probe(unsigned int, unsigned short, unsigned short, unsigned char, PKT_TYPE) (trace4.cpp:56)
==24227==    by 0x41C03E: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:66)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
==24227== 
==24227== 150972 errors in context 140 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x91436A0 by thread #2
==24227== Locks held: none
==24227==    at 0x41EAA4: std::vector<Hop, std::allocator<Hop> >::insert(__gnu_cxx::__normal_iterator<Hop const*, std::vector<Hop, std::allocator<Hop> > >, Hop const&) (vector.tcc:119)
==24227==    by 0x41DF1D: Flow::updateHop(unsigned int, Hop) (graph.cpp:22)
==24227==    by 0x407A4A: parseICMP(Traceroute*) (listener.cpp:150)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Address 0x91436a0 is 80 bytes inside a block of size 512 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x40B5C5: __gnu_cxx::new_allocator<Flow>::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x40AC09: std::allocator_traits<std::allocator<Flow> >::allocate(std::allocator<Flow>&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x40A10F: std::_Vector_base<Flow, std::allocator<Flow> >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x409391: void std::vector<Flow, std::allocator<Flow> >::_M_emplace_back_aux<Flow const&>(Flow const&) (vector.tcc:412)
==24227==    by 0x408B34: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:923)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227==  Block was alloc'd by thread #2
==24227== 
==24227== 
==24227== 167344 errors in context 141 of 141:
==24227== ----------------------------------------------------------------
==24227== 
==24227== Possible data race during write of size 8 at 0x60FD618 by thread #2
==24227== Locks held: none
==24227==    at 0x408B1C: std::vector<Flow, std::allocator<Flow> >::push_back(Flow const&) (stl_vector.h:919)
==24227==    by 0x407922: parseICMP(Traceroute*) (listener.cpp:135)
==24227==    by 0x407F10: listener(void*) (listener.cpp:267)
==24227==    by 0x4C34DB6: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x5B066B9: start_thread (pthread_create.c:333)
==24227==    by 0x5E2341C: clone (clone.S:109)
==24227== 
==24227== This conflicts with a previous read of size 8 by thread #1
==24227== Locks held: none
==24227==    at 0x4089DA: std::vector<Flow, std::allocator<Flow> >::size() const (stl_vector.h:655)
==24227==    by 0x421F6E: Scheduler::pathEnumE2E(unsigned int, IPState*, std::vector<Flow, std::allocator<Flow> >&) (scheduler.cpp:112)
==24227==    by 0x42467D: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:655)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Address 0x60fd618 is 24 bytes inside a block of size 40 alloc'd
==24227==    at 0x4C2F50F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==24227==    by 0x42BA81: __gnu_cxx::new_allocator<std::pair<unsigned char, IPState> >::allocate(unsigned long, void const*) (new_allocator.h:104)
==24227==    by 0x42AF8F: std::allocator_traits<std::allocator<std::pair<unsigned char, IPState> > >::allocate(std::allocator<std::pair<unsigned char, IPState> >&, unsigned long) (alloc_traits.h:491)
==24227==    by 0x429EF9: std::_Vector_base<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_allocate(unsigned long) (stl_vector.h:170)
==24227==    by 0x428219: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::_M_emplace_back_aux<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:412)
==24227==    by 0x426BA0: void std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::emplace_back<std::pair<unsigned char, IPState> >(std::pair<unsigned char, IPState>&&) (vector.tcc:101)
==24227==    by 0x4257E9: std::vector<std::pair<unsigned char, IPState>, std::allocator<std::pair<unsigned char, IPState> > >::push_back(std::pair<unsigned char, IPState>&&) (stl_vector.h:932)
==24227==    by 0x421CA4: PfxState::addToIPMap(unsigned int) (scheduler.cpp:80)
==24227==    by 0x423617: Scheduler::populateTarget() (scheduler.cpp:422)
==24227==    by 0x42441A: Scheduler::nextAddr(std::vector<Flow, std::allocator<Flow> >&, PKT_TYPE&, Graph&) (scheduler.cpp:616)
==24227==    by 0x41BE66: loop(YarrpConfig*, Traceroute*, Patricia*, Stats*) (yarrp.cpp:26)
==24227==    by 0x41C730: main (yarrp.cpp:169)
==24227==  Block was alloc'd by thread #1
==24227== 
--24227-- 
--24227-- used_suppression:     19 helgrind-glibc2X-004 /usr/lib/valgrind/default.supp:931
--24227-- used_suppression:     38 helgrind-glibc-io-xsputn-mempcpy /usr/lib/valgrind/default.supp:937
--24227-- used_suppression:    220 helgrind-glibc2X-005 /usr/lib/valgrind/default.supp:945
--24227-- used_suppression: 1549944 helgrind-glibc2X-105 /usr/lib/valgrind/default.supp:1002
==24227== 
==24227== ERROR SUMMARY: 1989470 errors from 141 contexts (suppressed: 1550221 from 35)
